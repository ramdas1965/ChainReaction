<!DOCTYPE html>
<html>
    <head>
        <title>Chain Reaction Ver 8.0</title>
	    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	    <style type="text/css" >
   
			html, body 	    {  	height: 100%; margin:0px; padding:0px; background-color: grey; }
	      
			.cell          	{  	height: 50px; width: 50px; float: left; border : 2px solid black; position:relative; }
			.cell img   	    { 	position:absolute; left:0px; top: 0px; }
			.clear     	    {  	clear:left }
			#gameBoard  	{  	width: 432px;  height:  540px; margin: 50px auto; border-radius:  10px; 
		                        border-style:solid; border-width: 10px; background-color: white; 
							}
			#gameOverMessage 	{  	width: 432px;  height:  394px; margin: 20px auto; text-align: center;
									font-size: 100px; position: relative; top: -598px; background-color: rgba(0,0,0, 0.1);
									padding-top:142px; font-weight: bolder; display: none; color: red;
								}
	    </style>
		
	    <script type="text/javascript"  >

		    var  UP    = 1;
		    var  DOWN  = 2;
		    var  LEFT  = 4;
		    var  RIGHT = 8;
			
		    var  USER_NONE = 100;
			
			
		    //Object User
			
		    function User ( color, cellsUsed, userId )
		    {
			
		    }
			

		    //Object GameCell ( wrappper class for cell div tag )
			
		    function GameCell ( row, col ) 
		    {
				this.div  = document.createElement ( "div" );
							
				this.criticalMass    = 0;
				this.mass            = 0;
				this.row             = row;
				this.col             = col;
				this.userId          = USER_NONE;
                                this.validDirections = 0;							
                   }
			

			//GameImage ( wrapper class for img tag )
			
			function GameImage ()
			{	
				this.image = document.createElement ( "img" );

				this.animated       = false;
				this.stepsCompleted = 0;
				this.direction      = 0;
				this.targetRow      = 0;
				this.targetCol      = 0;
			}	


			//GameBoard ( wrappper class for gameboard div tag )
			
			function GameBoard ()
			{
				var  COLS      = 8;
				var  ROWS      = 10;
				var  LAST_COL  = COLS - 1;
				var  LAST_ROW  = ROWS - 1;
				var  FIRST_ROW = 0;
				var  FIRST_COL = 0;
				
				var  i;
				var  row,col;
				var  gameCell;
				var  domBoard;	
                                var  cellMatrix;	
				

				//Method to change color of the gameboard
				this.changeBoardColor = function ( color ) 
				{
					 
				}
				
		
				//Method to returns cell at fiven row and column in gameboard		
				this.getCellAt = function ( row, col ) 
				{
					 
				}
				

				//Method to add onclick event handler to gameboard
				this.enableUserInputHandler = function ( handlerFunction )
				{
					 
				}
				
	
				//Method to remove onclick event handler from gameboard	
				this.disableUserInputHandler = function ( handlerFunction )
				{
					 
				}	
			

				//Function to set valid directions for a cell		
				function	setValidDirectionsForCell( gameCell, row, col )
				{
					 				
				}


	
				//Main code of GameBoard - executed when GameBoard is created
					
					
				domBoard =  document.getElementById ( "gameBoard" );
				domBoard.innerHTML = "";
					
				cellMatrix = new Array ( ROWS );				
				for ( i=0; i < ROWS; i++ )
					cellMatrix[ i ] = new Array ( COLS );
					   
				for ( row = 0; row < ROWS; row++ )
				{
					for ( col = 0; col < COLS; col++ )
					{
							
						gameCell = new GameCell ( row, col );
						
						gameCell.div.cell = gameCell;
							
						domBoard.appendChild ( gameCell.div );
							
						gameCell.div.classList.add ( "cell" );		
						if ( col == FIRST_COL )
							gameCell.div.classList.add ( "clear" );
							
						setValidDirectionsForCell ( gameCell, row, col );

						cellMatrix[row][col] = gameCell;
					}
				}
			}       	
			

			//ChainReaction Object ( should be created to start the  game )
			
			function ChainReactionGame ()
			{
					
				var  STEP          = 2;
				var  TOTAL_STEPS   = 27;
				var  TIME_INTERVAL = 15;
					
				var TOTAL_USERS = 2;	
				var user = new Array ( TOTAL_USERS );
				
				var animatedImages = new  Array();
				var imagesAnimated = false;
				var animateHandle;
					
				var validDirections = [ UP, DOWN, LEFT, RIGHT ];
							
				var currentUserId;
				var totalCellsUsed = 0;
				
				var gameBoard;			
				
                                var dirIndex;				
				
	
				//Function to create all users	
				function createUsers()
				{
					   
				}
			
	
				//Function to handle user change
				function changeUser()
				{
					
				}
			
	
                //Function to handle user click inside a cell ( onclick event handler )
				function handleUserAction ()
				{
					var div;
					var gameCell;
					
					   
					div = event.target;
					
					div = ( div.tagName == "IMG" ? div.parentNode : div );
				
					gameCell = div.cell;
					
					if ( !( gameCell.userId == USER_NONE || gameCell.userId == currentUserId ) )
						return;
						
					gameBoard.disableUserInputHandler ( handleUserAction ); 
					
					handleAddImageToCell ( gameCell );	
					
					if ( !imagesAnimated )
					{
						changeUser();
						gameBoard.enableUserInputHandler ( handleUserAction ); 
					}
				}


				//Function to handle the action of adding image to the cell
				function handleAddImageToCell ( gameCell )
				{
					
				}
			
	
				//Function to assign direction to image
				function setImageDirection( gameCell, gameImage )
				{
												
				}
				

				//Function to set target cell of the image that has split and started moving			
				function setTargetCellOfImage ( gameCell, gameImage )
				{ 
					
				}
				

                               //Function to set up animateImages function to execute at regular interval when there are images to be moved
                                function startAnimationIfRequired ()
				{	
                  
                                }   
				

				//Function that moves images ( needs to be set up to execute at regular interval while there are images to be moved )
				function animateImages ()
				{
									
				}
	  

				//Function to move image by one step
                               function moveImageByOneStep ( gameImage )
                               {
				
                               }


                                //Function to remove images from animatedImages array after they have reached their destination cell
				function removeImagesFromAnimatedImagesArray ()
				{
					
				}
			
	
				//Function to stop animateImages function when there are no more images to be moved
                                function stopAnimationIfNotRequired ()
				{	
                
                                }					
				

				//Function to check end of game condition
				function gameHasEnded ()
				{
					
				}
				
                
                                //Main code of ChainReaction - creates all objects necessary to start the game
				//Sets up handler to handle onclick user event
				
				
				currentUserId = 0;
				createUsers ();
				
				gameBoard =  new GameBoard ();
				gameBoard.changeBoardColor ( user[currentUserId].color );
				
				document.getElementById("endSound").load();
				document.getElementById("boomSound").load();
				
				gameBoard.enableUserInputHandler ( handleUserAction ); 
 
            }
			
			
			
			//Function startChainReaction ( should be called after web page loads )
			
			function startChainReaction ()
			{
				var game;
				
				game = new ChainReactionGame ();	  
			}
			
			
			//Set StartChainReaction to execute after web page loads
			
			
			window.addEventListener ( "load", startChainReaction );
			
			
	    </script>
		
    </head>
    <body>
	
			<div id="gameBoard"></div>
			<div id="gameOverMessage">GAME OVER</div>
  
			<audio id="endSound" src="./sound/chime.wav" type="audio/x-wav" >
			<audio id="boomSound" src="./sound/boom.wav" type="audio/x-wav" >
			
    </body>
</html>
